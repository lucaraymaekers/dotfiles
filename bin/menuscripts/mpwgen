#!/bin/sh

if [ "$MENUCMD" = "dmenu" ]
then
    input()
    {
        dmenu -p "${1% }" -c < /dev/null
    }
else
    input()
    {
        >&2 printf '%s: ' "${1%: }"
        head -n 1
    }
fi

URL="$(input 'url: ')"
[ "$URL" ] || exit 1
Login="$(input 'login: ')"
[ "$Login" ] || exit 1

Password="websites/$URL/$Login"
pass generate -c "$Password"
notify-send '*mpwgen' "$Password"
