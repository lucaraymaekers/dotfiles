#!/bin/sh

eval "$(keychain --dir "$XDG_CONFIG_HOME/keychain" --eval --quiet --agents gpg,ssh)"
eval "$(keychain --dir "$XDG_CONFIG_HOME/keychain" --eval --quiet --agents gpg 3A626DD20A32EB2E5DD9CE71CFD9ABC97158CD5D 2> /dev/null)"

export XCURSOR_THEME="Bibata-Modern-Classic"
export XCURSOR_SIZE="24"

export GTK_THEME="Arc-Dark"

export GTK_IM_MODULE="fcitx"
export XMODIFIERS="@im=fcitx"
export GLFW_IM_MODULE="ibus"

export MOZ_ENABLE_WAYLAND="1"

export QT_IM_MODULE="fcitx"
export QT_AUTO_SCREEN_SCALE_FACTOR="1"
export QT_QPA_PLATFORM="wayland;xcb"
export QT_QPA_PLATFORMTHEME="qt5ct"
export QT_WAYLAND_DISABLE_WINDOWDECORATION="1"

export XDG_CURRENT_DESKTOP="dwl"
export XDG_SESSION_TYPE="wayland"
export XDG_SESSION_DESKTOP="dwl"

export SDL_IM_MODULE="fcitx"
export SDL_VIDEODRIVER="wayland"
export CLUTTER_BACKEND="wayland"

export TERMINAL="foot"
export MENUCMD="tofi"
export IMAGE="imv"

# # nvidia
# env = LIBVA_DRIVER_NAME,nvidia
# env = XDG_SESSION_TYPE,wayland
# env = GBM_BACKEND,nvidia-drm
# env = __GLX_VENDOR_LIBRARY_NAME,nvidia
# env = WLR_NO_HARDWARE_CURSORS,1

(cd ~/.config/waybar/ && ln -sf dwl.jsonc config.jsonc)

eval "$(keychain --dir "$XDG_CONFIG_HOME/keychain" --eval --quiet --agents gpg,ssh)"
eval "$(keychain --dir "$XDG_CONFIG_HOME/keychain" --eval --quiet --agents gpg 3A626DD20A32EB2E5DD9CE71CFD9ABC97158CD5D 2> /dev/null)"

while true;
do dwl -s $HOME/.config/hypr/startup.sh
done
