#!/bin/sh

# open a link from a txt file in surf

# dependencies: surf, osurf, dmenu

winid="$1"
>&2 printf 'winid: %s\n' "$winid"
tabs="$HOME/dl/txtabs"

f="$(find "$tabs" -type f -printf '%f\n' | dmenu -c)"
[ "$f" ] || exit 1
f="$tabs"/"$f"
>&2 printf 'f: %s\n' "$f"

url="$(dmenu -x -c < "$f")"
[ "$url" ] || exit 1

printf 'loaduri %s\n' "$url" > $HOME/.config/surf/fifo/$winid
