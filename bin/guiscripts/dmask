#!/bin/sh

# requirements
which dmenu Xdialog ask > /dev/null ||
	exit 1

prompt="$(echo -n | dmenu -p "prompt:" | tr '"' "'" | tee -a /tmp/dmask_history)"

test -z "$prompt" && exit 1
answer="$(ask "$prompt" | tr '"' "'" | fold -w 80 -s)"

if ! Xdialog --wrap --msgbox "${answer:1}" 0 0
then
	echo -n "$answer" | xclip -r -sel c
fi
